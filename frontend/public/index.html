<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InnovaTube</title>
    <style>
    </style>

    <!-- Íconos (Font Awesome) y fuentes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>

    <script>
        const YOUTUBE_API_KEY = 'AIzaSyASTy3sPWA5xrEe4MLz-zTQREiMEw14Fkg';
        const MAX_RESULTS = 12;

        // Elementos del DOM para búsqueda
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const videoGrid = document.getElementById('videoGrid');

        //  Función principal de búsqueda
        async function searchVideos() {
            const query = searchInput.value.trim();
            
            if (!query) {
                alert('Por favor ingresa un término de búsqueda');
                return;
            }

            try {
                // Mostrar estado de carga
                videoGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;">Buscando videos...</p>';
                
                // Llamada a la API de YouTube
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?key=${YOUTUBE_API_KEY}&q=${encodeURIComponent(query)}&part=snippet&maxResults=${MAX_RESULTS}&type=video`
                );
                
                const data = await response.json();
                
                if (data.items && data.items.length > 0) {
                    displayVideos(data.items);
                } else {
                    videoGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;">No se encontraron videos</p>';
                }
                
            } catch (error) {
                console.error('Error al buscar videos:', error);
                videoGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:red;">Error al cargar videos. Intenta nuevamente.</p>';
            }
        }

        
        function displayVideos(videos) {
            videoGrid.innerHTML = '';
            
            videos.forEach(video => {
                if (!video.id.videoId) return;
                
                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                videoCard.innerHTML = `
                    <div class="video-thumbnail">
                        <img src="${video.snippet.thumbnails.medium.url}" alt="${video.snippet.title}">
                    </div>
                    <div class="video-info">
                        <h3>${video.snippet.title}</h3>
                        <button onclick="watchVideo('${video.id.videoId}')">
                            <i class="fas fa-play"></i> Ver
                        </button>
                    </div>
                `;
                videoGrid.appendChild(videoCard);
            });
        }

        //  Ver video en YouTube
        function watchVideo(videoId) {
            window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
        }

        //  Event Listeners para búsqueda
        searchButton.addEventListener('click', searchVideos);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchVideos();
        });

        function showLoginForm() {
            document.getElementById('formsContainer').style.display = 'flex';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('formsContainer').style.display = 'flex';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        function closeForm() {
            document.getElementById('formsContainer').style.display = 'none';
        }

        function loginUser() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const recaptchaResponse = grecaptcha.getResponse();

            if (!recaptchaResponse) {
                document.getElementById('recaptcha-error').style.display = 'block';
                return;
            }
            console.log('Iniciando sesión...', username, password);
            closeForm();
        }

        function registerUser() {
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const recaptchaResponse = grecaptcha.getResponse();

            if (!recaptchaResponse) {
                document.getElementById('recaptcha-error').style.display = 'block';
                return;
            }
            console.log('Registrando usuario...', username, email, password);
            closeForm();
        }
    </script>
</body>
</html>
